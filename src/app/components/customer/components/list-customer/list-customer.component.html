<div class ="cards">
  <div class="employees animate__animated animate__fadeIn">
    <section class="divTable">
      <div class="AddPerson">
        <mat-form-field class="select_list_customer">
          <mat-label class="matLabel ">Recherche<mat-icon class="icons2">search</mat-icon></mat-label>
          <input  type="text" name="nameCustomer" [(ngModel)]="nameCustomer" (ngModelChange)="ngModelChange()"  placeholder="Nom du client" matInput >
        </mat-form-field>
          <button mat-button type="button" (click)="FormAddUser()"><mat-icon class="icons">person_add</mat-icon> Ajouter un client</button>
      </div>
      <table *ngIf="pagedData != null">
        <thead>
          <tr>
            <th>Nom</th>
            <th>client</th>
            <th>Site a modifier</th>
            <th>Actions par site</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let client of pagedData">
            <td><a><u>{{client.nameCustomer| titlecase }}</u></a></td>
            <td>
              <button class="buttonIcons"  (click)="Delete(client.customerId)" type="button"><mat-icon class="icons3">delete</mat-icon></button>
              <button class="buttonIcons" (click)="UpdateCustomer(client.customerId)" type="button"><mat-icon  class="icons2">edit_square</mat-icon></button>
            </td>
            <td>
              <div class="select_list_customer" *ngIf="client.site != null">
                <mat-form-field >
                  <mat-label>--Sélectionnez un site--</mat-label>
                  <mat-select [(value)]="selectedSiteName">
                    <mat-option *ngFor="let elt of client.site"  [value]="elt.name" >
                      {{elt.name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </td>
            <td>
              <button class="buttonIcons" (click)="AddSite(client.customerId)" type="button"><mat-icon  class="icons1">add</mat-icon></button>
              <button  class="buttonIcons" (click)="GetOne(client.customerId)" type="button"><mat-icon  class="icons1">visibility</mat-icon></button>
              <button class="buttonIcons" (click)="UpdateOne(client.customerId)" type="button"><mat-icon  class="icons2">edit_square</mat-icon></button>
              <button  class="buttonIcons" (click)="DeleteSite(client.customerId)" type="button"><mat-icon class="icons3">delete</mat-icon></button>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="paginator">
        <mat-paginator class="paginator" #paginator [pageSize]="8" [length]="length"></mat-paginator>
      </div>
    </section>
  </div>


  <div class="rep animate__animated animate__fadeIn" *ngIf="select == false && siteSelected == null ">
    <section class="cards1">
      <router-outlet></router-outlet>
    </section>
  </div>

  <div class="rep animate__animated animate__fadeIn" *ngIf="select == true && siteSelected != null ">
    <h3>Site : {{siteSelected.name}}</h3>
    <div class="cards2">
      <div class="contcards2">
        <p  *ngIf="siteSelected.language != null">Langue de contact : {{siteSelected.language.name}} </p>
        <p>Adresse:</p>
        <p>Rue : {{siteSelected.address.sreetAddress}}</p>
        <p>Code Postal : {{siteSelected.address.zipCode}}</p>
        <p>Pays : {{siteSelected.address.state}}</p>
        <p>Ville : {{siteSelected.address.city}}</p>
        <p> Nr° de Tva: {{siteSelected.vatNumber}}</p>
        <img src="https://www.w3schools.com/howto/img_avatar.png">
      </div>
      <div class="detailsCard2">
        <p *ngIf="siteSelected.contactSite.length != 0" class="email">
        </p>

        <table >
          <caption><h3>Responsable(s) du site:</h3> </caption>
          <thead>
            <tr >
              <th>Nom</th>
              <th>Prénom</th>
              <th>téléphone(s)</th>
              <th>Email(s)</th>
            </tr>
          </thead>
          <tbody *ngFor="let elt of siteSelected.contactSite; let i = index">
            <tr *ngIf="elt.responsible">
              <td>{{elt.firstName}}</td>
              <td>{{elt.lastName}}</td>
              <td ><p *ngFor="let phone of elt.phone">{{phone.number}}</p></td>
              <td><p *ngFor="let email of elt.email">{{email.emailAddress}}</p></td>
            </tr>
          </tbody>
        </table>

        <table >
          <caption><h3>Contact(s) de nuit:</h3></caption>
          <thead>
            <tr>
              <th>Nom</th>
              <th>Prénom</th>
              <th>téléphone(s)</th>
              <th>Email(s)</th>
            </tr>
          </thead>
          <tbody *ngFor="let elt of siteSelected.contactSite; let i = index">
            <tr *ngIf="elt.nightContact">
              <td>{{elt.firstName}}</td>
              <td>{{elt.lastName}}</td>
              <td><p *ngFor="let phone of elt.phone">{{phone.number}}</p></td>
              <td><p *ngFor="let email of elt.email">{{email.emailAddress}}</p></td>
            </tr>
          </tbody>
        </table>

        <table >
          <caption><h3>Contact(s) d'urgence:</h3></caption>
          <thead>
            <tr>
              <th>Nom</th>
              <th>Prénom</th>
              <th>téléphone(s)</th>
              <th>Email(s)</th>
            </tr>
          </thead>
          <tbody *ngFor="let elt of siteSelected.contactSite; let i = index">
            <tr *ngIf="elt.emergencyContact">
              <td>{{elt.firstName}}</td>
              <td>{{elt.lastName}}</td>
              <td ><p *ngFor="let phone of elt.phone">{{phone.number}}</p></td>
              <td><p *ngFor="let email of elt.email">{{email.emailAddress}}</p></td>
            </tr>
          </tbody>
        </table>

        <table >
          <caption><h3>Contact(s) de jour:</h3></caption>
          <thead>
            <tr>
              <th>Nom</th>
              <th>Prénom</th>
              <th>téléphone(s)</th>
              <th>Email(s)</th>
            </tr>
          </thead>
          <tbody *ngFor="let elt of siteSelected.contactSite; let i = index">
            <tr *ngIf="elt.dayContact ">
              <td>{{elt.firstName}}</td>
              <td>{{elt.lastName}}</td>
              <td ><p *ngFor="let phone of elt.phone">{{phone.number}}</p></td>
              <td><p *ngFor="let email of elt.email">{{email.emailAddress}}</p></td>
            </tr>
          </tbody>
        </table>
        </div>
      </div>
  </div>
</div>
